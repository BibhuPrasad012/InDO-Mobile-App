import React, {useState } from 'react';
import {Text,View,StyleSheet,Image,TouchableOpacity} from 'react-native';
import AsyncStorage from '@react-native-async-storage/async-storage';
import axios from 'axios';
import * as Linking from 'expo-linking';
import {navigate} from "../navigationRef";

import googleFitImg from '../../assets/Images/google_fit_img.png';


let sensorData = [{"glucose_level": 141.9766411570711, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 06:00:00", "physical_activity_level": 3}, {"glucose_level": 144.45925016383578, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 06:05:00", "physical_activity_level": 3}, {"glucose_level": 146.82781866742343, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 06:10:00", "physical_activity_level": 3}, {"glucose_level": 148.69853914300984, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 06:15:00", "physical_activity_level": 2}, {"glucose_level": 149.28855519548736, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 06:20:00", "physical_activity_level": 1}, {"glucose_level": 147.90158553420565, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 06:25:00", "physical_activity_level": 3}, {"glucose_level": 144.53394996895233, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 06:30:00", "physical_activity_level": 2}, {"glucose_level": 140.6537457005518, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 06:35:00", "physical_activity_level": 2}, {"glucose_level": 137.95754596698904, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 06:40:00", "physical_activity_level": 3}, {"glucose_level": 137.19932796203398, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 06:45:00", "physical_activity_level": 3}, {"glucose_level": 137.13005232030326, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 06:50:00", "physical_activity_level": 3}, {"glucose_level": 136.12004995383194, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 06:55:00", "physical_activity_level": 1}, {"glucose_level": 133.26499812377173, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 07:00:00", "physical_activity_level": 1}, {"glucose_level": 129.2019350868472, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 07:05:00", "physical_activity_level": 1}, {"glucose_level": 124.9366195636866, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 07:10:00", "physical_activity_level": 2}, {"glucose_level": 121.52318852126214, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 07:15:00", "physical_activity_level": 1}, {"glucose_level": 120.11858268625997, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 07:20:00", "physical_activity_level": 3}, {"glucose_level": 121.78376051250811, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 07:25:00", "physical_activity_level": 1}, {"glucose_level": 126.6183092195284, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 07:30:00", "physical_activity_level": 1}, {"glucose_level": 132.67890213353752, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 07:35:00", "physical_activity_level": 2}, {"glucose_level": 137.64863113454302, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 07:40:00", "physical_activity_level": 2}, {"glucose_level": 140.06742141356773, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 07:45:00", "physical_activity_level": 1}, {"glucose_level": 140.29596892653925, "cho_level": 9.8, "insuline_level": 0.021125, "sensor_time": "2021-08-09 07:50:00", "physical_activity_level": 1, "meal_time": "2021-08-09 07:50:00"}, {"glucose_level": 139.11018486573732, "cho_level": 0.0, "insuline_level": 0.217125, "sensor_time": "2021-08-09 07:55:00", "physical_activity_level": 3, "insuline_dose_time": "2021-08-09 07:55:00"}, {"glucose_level": 137.18671563543634, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 08:00:00", "physical_activity_level": 1}, {"glucose_level": 135.05183149430508, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 08:05:00", "physical_activity_level": 3}, {"glucose_level": 133.44006919976877, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 08:10:00", "physical_activity_level": 2}, {"glucose_level": 133.3442495035432, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 08:15:00", "physical_activity_level": 1}, {"glucose_level": 135.65638385261093, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 08:20:00", "physical_activity_level": 2}, {"glucose_level": 140.68942171266744, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 08:25:00", "physical_activity_level": 3}, {"glucose_level": 147.30324595045823, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 08:30:00", "physical_activity_level": 2}, {"glucose_level": 153.77529806269297, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 08:35:00", "physical_activity_level": 2}, {"glucose_level": 160.4527698436835, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 08:40:00", "physical_activity_level": 3}, {"glucose_level": 167.69230973154745, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 08:45:00", "physical_activity_level": 2}, {"glucose_level": 175.9103558436154, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 08:50:00", "physical_activity_level": 3}, {"glucose_level": 185.49935347579049, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 08:55:00", "physical_activity_level": 2}, {"glucose_level": 196.10796889739208, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 09:00:00", "physical_activity_level": 1}, {"glucose_level": 205.70544572516224, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 09:05:00", "physical_activity_level": 1}, {"glucose_level": 212.06536018847413, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 09:10:00", "physical_activity_level": 3}, {"glucose_level": 214.246947089728, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 09:15:00", "physical_activity_level": 1}, {"glucose_level": 213.97348455234894, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 09:20:00", "physical_activity_level": 2}, {"glucose_level": 213.49380998254918, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 09:25:00", "physical_activity_level": 3}, {"glucose_level": 214.12443162135048, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 09:30:00", "physical_activity_level": 3}, {"glucose_level": 215.17429732177806, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 09:35:00", "physical_activity_level": 1}, {"glucose_level": 215.55588774062116, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 09:40:00", "physical_activity_level": 3}, {"glucose_level": 214.77157543757536, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 09:45:00", "physical_activity_level": 1}, {"glucose_level": 213.57376627188916, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 09:50:00", "physical_activity_level": 2}, {"glucose_level": 212.9550668835437, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 09:55:00", "physical_activity_level": 1}, {"glucose_level": 213.4988613444451, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 10:00:00", "physical_activity_level": 2}, {"glucose_level": 214.92397138974724, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 10:05:00", "physical_activity_level": 3}, {"glucose_level": 216.73397354907365, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 10:10:00", "physical_activity_level": 1}, {"glucose_level": 218.36736381819722, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 10:15:00", "physical_activity_level": 1}, {"glucose_level": 219.1308911892197, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 10:20:00", "physical_activity_level": 2}, {"glucose_level": 218.35342502578183, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 10:25:00", "physical_activity_level": 1}, {"glucose_level": 215.8137502498224, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 10:30:00", "physical_activity_level": 3}, {"glucose_level": 212.2522362570532, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 10:35:00", "physical_activity_level": 2}, {"glucose_level": 208.63286527229695, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 10:40:00", "physical_activity_level": 3}, {"glucose_level": 205.91645650493695, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 10:45:00", "physical_activity_level": 3}, {"glucose_level": 205.0610679861453, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 10:50:00", "physical_activity_level": 2}, {"glucose_level": 205.14914860676748, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 10:55:00", "physical_activity_level": 1}, {"glucose_level": 200.78466120818723, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 11:00:00", "physical_activity_level": 1}, {"glucose_level": 197.33169526519077, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 11:05:00", "physical_activity_level": 3}, {"glucose_level": 194.9373946303722, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 11:10:00", "physical_activity_level": 3}, {"glucose_level": 193.74762195701987, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 11:15:00", "physical_activity_level": 2}, {"glucose_level": 193.9071552101858, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 11:20:00", "physical_activity_level": 1}, {"glucose_level": 195.49802497728052, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 11:25:00", "physical_activity_level": 1}, {"glucose_level": 198.10681625278858, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 11:30:00", "physical_activity_level": 1}, {"glucose_level": 200.26816941422197, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 11:35:00", "physical_activity_level": 2}, {"glucose_level": 200.3849777032886, "cho_level": 16.8, "insuline_level": 0.021125, "sensor_time": "2021-08-09 11:40:00", "physical_activity_level": 1, "meal_time": "2021-08-09 11:40:00"}, {"glucose_level": 197.7904858086623, "cho_level": 0.0, "insuline_level": 1.6745750000000001, "sensor_time": "2021-08-09 11:45:00", "physical_activity_level": 3, "insuline_dose_time": "2021-08-09 11:45:00"}, {"glucose_level": 193.80705817497227, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 11:50:00", "physical_activity_level": 2}, {"glucose_level": 190.23607689020452, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 11:55:00", "physical_activity_level": 3}, {"glucose_level": 188.45191422402192, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 12:00:00", "physical_activity_level": 1}, {"glucose_level": 188.58611906342531, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 12:05:00", "physical_activity_level": 3}, {"glucose_level": 190.52713860425786, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 12:10:00", "physical_activity_level": 1}, {"glucose_level": 194.30762388186565, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 12:15:00", "physical_activity_level": 3}, {"glucose_level": 200.3692865205016, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 12:20:00", "physical_activity_level": 3}, {"glucose_level": 208.91470976403699, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 12:25:00", "physical_activity_level": 3}, {"glucose_level": 219.66212246099238, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 12:30:00", "physical_activity_level": 2}, {"glucose_level": 231.72805394941076, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 12:35:00", "physical_activity_level": 3}, {"glucose_level": 244.17900841715505, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 12:40:00", "physical_activity_level": 2}, {"glucose_level": 256.3866709115636, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 12:45:00", "physical_activity_level": 2}, {"glucose_level": 268.26507660497236, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 12:50:00", "physical_activity_level": 2}, {"glucose_level": 279.91591358295506, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 12:55:00", "physical_activity_level": 2}, {"glucose_level": 291.2219321676906, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 13:00:00", "physical_activity_level": 2}, {"glucose_level": 301.44561826405527, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 13:05:00", "physical_activity_level": 2}, {"glucose_level": 309.7571616219091, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 13:10:00", "physical_activity_level": 3}, {"glucose_level": 315.3833321160642, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 13:15:00", "physical_activity_level": 1}, {"glucose_level": 317.5899582884098, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 13:20:00", "physical_activity_level": 1}, {"glucose_level": 316.72048273875873, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 13:25:00", "physical_activity_level": 3}, {"glucose_level": 315.8521494501999, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 13:30:00", "physical_activity_level": 1}, {"glucose_level": 312.8843016480842, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 13:35:00", "physical_activity_level": 2}, {"glucose_level": 308.84415485514677, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 13:40:00", "physical_activity_level": 1}, {"glucose_level": 304.7534457421829, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 13:45:00", "physical_activity_level": 3}, {"glucose_level": 301.62567050319564, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 13:50:00", "physical_activity_level": 2}, {"glucose_level": 300.3306512202091, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 13:55:00", "physical_activity_level": 3}, {"glucose_level": 300.657070158332, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 14:00:00", "physical_activity_level": 1}, {"glucose_level": 300.1079852124641, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 14:05:00", "physical_activity_level": 1}, {"glucose_level": 295.85392593711447, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 14:10:00", "physical_activity_level": 3}, {"glucose_level": 286.76161056574915, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 14:15:00", "physical_activity_level": 1}, {"glucose_level": 275.3141334726243, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 14:20:00", "physical_activity_level": 3}, {"glucose_level": 264.6820498940587, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 14:25:00", "physical_activity_level": 1}, {"glucose_level": 256.7713764088099, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 14:30:00", "physical_activity_level": 1}, {"glucose_level": 250.8104900857736, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 14:35:00", "physical_activity_level": 2}, {"glucose_level": 245.45955302937202, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 14:40:00", "physical_activity_level": 1}, {"glucose_level": 239.90391650380357, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 14:45:00", "physical_activity_level": 3}, {"glucose_level": 234.45170931556106, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 14:50:00", "physical_activity_level": 3}, {"glucose_level": 229.58834133748508, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 14:55:00", "physical_activity_level": 2}, {"glucose_level": 225.1244100845472, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 15:00:00", "physical_activity_level": 2}, {"glucose_level": 219.44102541734873, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 15:05:00", "physical_activity_level": 3}, {"glucose_level": 210.76633560814636, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 15:10:00", "physical_activity_level": 2}, {"glucose_level": 198.80848820988086, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 15:15:00", "physical_activity_level": 1}, {"glucose_level": 186.4231732725931, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 15:20:00", "physical_activity_level": 2}, {"glucose_level": 177.01051527456383, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 15:25:00", "physical_activity_level": 3}, {"glucose_level": 172.41350779560838, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 15:30:00", "physical_activity_level": 1}, {"glucose_level": 171.16685881577632, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 15:35:00", "physical_activity_level": 3}, {"glucose_level": 171.02647821582823, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 15:40:00", "physical_activity_level": 1}, {"glucose_level": 169.74846605033224, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 15:45:00", "physical_activity_level": 3}, {"glucose_level": 165.08859120023914, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 15:50:00", "physical_activity_level": 3}, {"glucose_level": 158.2235255027806, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 15:55:00", "physical_activity_level": 1}, {"glucose_level": 158.55821771221952, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 16:00:00", "physical_activity_level": 1}, {"glucose_level": 156.31444086003833, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 16:05:00", "physical_activity_level": 2}, {"glucose_level": 152.293277416776, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 16:10:00", "physical_activity_level": 3}, {"glucose_level": 147.2955813178018, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 16:15:00", "physical_activity_level": 1}, {"glucose_level": 142.12206110442017, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 16:20:00", "physical_activity_level": 3}, {"glucose_level": 137.53196368766675, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 16:25:00", "physical_activity_level": 2}, {"glucose_level": 133.9534430846507, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 16:30:00", "physical_activity_level": 2}, {"glucose_level": 131.11115024144655, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 16:35:00", "physical_activity_level": 3}, {"glucose_level": 128.5913401349579, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 16:40:00", "physical_activity_level": 1}, {"glucose_level": 126.19706872555649, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 16:45:00", "physical_activity_level": 1}, {"glucose_level": 124.19203304431245, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 16:50:00", "physical_activity_level": 3}, {"glucose_level": 122.8990701272238, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 16:55:00", "physical_activity_level": 1}, {"glucose_level": 122.24651939482631, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 17:00:00", "physical_activity_level": 3}, {"glucose_level": 121.32429600373281, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 17:05:00", "physical_activity_level": 1}, {"glucose_level": 119.11266555890889, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 17:10:00", "physical_activity_level": 1}, {"glucose_level": 115.29228300097498, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 17:15:00", "physical_activity_level": 2}, {"glucose_level": 111.03199294247828, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 17:20:00", "physical_activity_level": 2}, {"glucose_level": 107.75292621802016, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 17:25:00", "physical_activity_level": 3}, {"glucose_level": 106.09255774622731, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 17:30:00", "physical_activity_level": 1}, {"glucose_level": 105.02295133035835, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 17:35:00", "physical_activity_level": 3}, {"glucose_level": 103.23918597789807, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 17:40:00", "physical_activity_level": 3}, {"glucose_level": 100.35470562108786, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 17:45:00", "physical_activity_level": 1}, {"glucose_level": 97.93433817498223, "cho_level": 14.2, "insuline_level": 0.021125, "sensor_time": "2021-08-09 17:50:00", "physical_activity_level": 3, "meal_time": "2021-08-09 17:50:00"}, {"glucose_level": 97.87278950066693, "cho_level": 0.0, "insuline_level": 0.305125, "sensor_time": "2021-08-09 17:55:00", "physical_activity_level": 1, "insuline_dose_time": "2021-08-09 17:55:00"}, {"glucose_level": 101.04676316537004, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 18:00:00", "physical_activity_level": 3}, {"glucose_level": 106.26699223419938, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 18:05:00", "physical_activity_level": 2}, {"glucose_level": 112.15456448795977, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 18:10:00", "physical_activity_level": 1}, {"glucose_level": 117.5881854427227, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 18:15:00", "physical_activity_level": 3}, {"glucose_level": 121.36417989483895, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 18:20:00", "physical_activity_level": 2}, {"glucose_level": 124.38069799233097, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 18:25:00", "physical_activity_level": 2}, {"glucose_level": 134.24609636724057, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 18:30:00", "physical_activity_level": 2}, {"glucose_level": 147.2103830029868, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 18:35:00", "physical_activity_level": 2}, {"glucose_level": 162.37885198989107, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 18:40:00", "physical_activity_level": 3}, {"glucose_level": 178.85828967189508, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 18:45:00", "physical_activity_level": 1}, {"glucose_level": 195.82820116826838, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 18:50:00", "physical_activity_level": 1}, {"glucose_level": 212.5124682096165, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 18:55:00", "physical_activity_level": 2}, {"glucose_level": 227.71781714655242, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 19:00:00", "physical_activity_level": 1}, {"glucose_level": 239.22059100302187, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 19:05:00", "physical_activity_level": 3}, {"glucose_level": 244.8278630293634, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 19:10:00", "physical_activity_level": 2}, {"glucose_level": 244.07261963170882, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 19:15:00", "physical_activity_level": 2}, {"glucose_level": 240.05469629662525, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 19:20:00", "physical_activity_level": 3}, {"glucose_level": 236.54642709773958, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 19:25:00", "physical_activity_level": 1}, {"glucose_level": 235.8039126866421, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 19:30:00", "physical_activity_level": 1}, {"glucose_level": 236.82193997112174, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 19:35:00", "physical_activity_level": 2}, {"glucose_level": 237.89924390967616, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 19:40:00", "physical_activity_level": 2}, {"glucose_level": 237.87885824823158, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 19:45:00", "physical_activity_level": 2}, {"glucose_level": 236.75515923466918, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 19:50:00", "physical_activity_level": 2}, {"glucose_level": 234.77356876589778, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 19:55:00", "physical_activity_level": 1}, {"glucose_level": 232.05325682510573, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 20:00:00", "physical_activity_level": 1}, {"glucose_level": 228.4525171800026, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 20:05:00", "physical_activity_level": 3}, {"glucose_level": 223.79574139832405, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 20:10:00", "physical_activity_level": 3}, {"glucose_level": 218.1707026725718, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 20:15:00", "physical_activity_level": 3}, {"glucose_level": 212.23453625138677, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 20:20:00", "physical_activity_level": 2}, {"glucose_level": 206.7485222682801, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 20:25:00", "physical_activity_level": 3}, {"glucose_level": 202.2722486731097, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 20:30:00", "physical_activity_level": 1}, {"glucose_level": 198.9448574823611, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 20:35:00", "physical_activity_level": 2}, {"glucose_level": 196.80265930821486, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 20:40:00", "physical_activity_level": 1}, {"glucose_level": 195.87729410312036, "cho_level": 0.2, "insuline_level": 0.021125, "sensor_time": "2021-08-09 20:45:00", "physical_activity_level": 3, "meal_time": "2021-08-09 20:45:00"}, {"glucose_level": 196.1963297154558, "cho_level": 0.0, "insuline_level": 1.3062333333333336, "sensor_time": "2021-08-09 20:50:00", "physical_activity_level": 3, "insuline_dose_time": "2021-08-09 20:50:00"}, {"glucose_level": 196.04250731278, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 20:55:00", "physical_activity_level": 3}, {"glucose_level": 190.56452583197293, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 21:00:00", "physical_activity_level": 3}, {"glucose_level": 187.9513111637911, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 21:05:00", "physical_activity_level": 2}, {"glucose_level": 187.2092937806367, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 21:10:00", "physical_activity_level": 3}, {"glucose_level": 187.325120751449, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 21:15:00", "physical_activity_level": 3}, {"glucose_level": 187.27397926102873, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 21:20:00", "physical_activity_level": 1}, {"glucose_level": 186.0956456553335, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 21:25:00", "physical_activity_level": 3}, {"glucose_level": 183.37476720941257, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 21:30:00", "physical_activity_level": 3}, {"glucose_level": 179.8546377452442, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 21:35:00", "physical_activity_level": 1}, {"glucose_level": 176.49240201949772, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 21:40:00", "physical_activity_level": 3}, {"glucose_level": 173.73633593044673, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 21:45:00", "physical_activity_level": 2}, {"glucose_level": 170.94480904184485, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 21:50:00", "physical_activity_level": 3}, {"glucose_level": 167.27624444096915, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 21:55:00", "physical_activity_level": 2}, {"glucose_level": 162.31825289232813, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 22:00:00", "physical_activity_level": 1}, {"glucose_level": 156.56499962726002, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 22:05:00", "physical_activity_level": 3}, {"glucose_level": 150.70394438096423, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 22:10:00", "physical_activity_level": 2}, {"glucose_level": 145.26489561652022, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 22:15:00", "physical_activity_level": 1}, {"glucose_level": 140.44182362972447, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 22:20:00", "physical_activity_level": 3}, {"glucose_level": 136.35226250429363, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 22:25:00", "physical_activity_level": 1}, {"glucose_level": 133.12843482973986, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 22:30:00", "physical_activity_level": 2}, {"glucose_level": 130.93301726536964, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 22:35:00", "physical_activity_level": 3}, {"glucose_level": 129.8919545286086, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 22:40:00", "physical_activity_level": 2}, {"glucose_level": 129.7884286141622, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 22:45:00", "physical_activity_level": 3}, {"glucose_level": 129.67912463956344, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 22:50:00", "physical_activity_level": 1}, {"glucose_level": 128.5007358473147, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 22:55:00", "physical_activity_level": 3}, {"glucose_level": 125.60537120878332, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 23:00:00", "physical_activity_level": 3}, {"glucose_level": 121.2296228565962, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 23:05:00", "physical_activity_level": 3}, {"glucose_level": 115.81733731638201, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 23:10:00", "physical_activity_level": 3}, {"glucose_level": 109.811319472723, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 23:15:00", "physical_activity_level": 3}, {"glucose_level": 103.65344643184189, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 23:20:00", "physical_activity_level": 2}, {"glucose_level": 98.2371505825994, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 23:25:00", "physical_activity_level": 3}, {"glucose_level": 95.13263197979228, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 23:30:00", "physical_activity_level": 1}, {"glucose_level": 91.97419736279095, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 23:35:00", "physical_activity_level": 2}, {"glucose_level": 88.76682534580019, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 23:40:00", "physical_activity_level": 3}, {"glucose_level": 85.51502654297246, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 23:45:00", "physical_activity_level": 2}, {"glucose_level": 82.22291514353833, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 23:50:00", "physical_activity_level": 2}, {"glucose_level": 78.91573188102966, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-09 23:55:00", "physical_activity_level": 1}, {"glucose_level": 75.79010687744936, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 00:00:00", "physical_activity_level": 3}, {"glucose_level": 73.40723211546539, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 00:05:00", "physical_activity_level": 2}, {"glucose_level": 72.37569911832671, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 00:10:00", "physical_activity_level": 2}, {"glucose_level": 72.99788218393482, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 00:15:00", "physical_activity_level": 3}, {"glucose_level": 74.9256251448131, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 00:20:00", "physical_activity_level": 1}, {"glucose_level": 77.6313947205063, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 00:25:00", "physical_activity_level": 3}, {"glucose_level": 80.3773942584724, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 00:30:00", "physical_activity_level": 3}, {"glucose_level": 81.97906904638575, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 00:35:00", "physical_activity_level": 1}, {"glucose_level": 81.2852545895297, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 00:40:00", "physical_activity_level": 3}, {"glucose_level": 78.25259878919009, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 00:45:00", "physical_activity_level": 1}, {"glucose_level": 75.19178895829208, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 00:50:00", "physical_activity_level": 2}, {"glucose_level": 74.76620622371684, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 00:55:00", "physical_activity_level": 2}, {"glucose_level": 78.02905321388151, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 01:00:00", "physical_activity_level": 3}, {"glucose_level": 82.61170354491921, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 01:05:00", "physical_activity_level": 2}, {"glucose_level": 85.52258205400373, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 01:10:00", "physical_activity_level": 3}, {"glucose_level": 85.2295170724745, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 01:15:00", "physical_activity_level": 3}, {"glucose_level": 83.30207337433852, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 01:20:00", "physical_activity_level": 2}, {"glucose_level": 81.93155252699079, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 01:25:00", "physical_activity_level": 3}, {"glucose_level": 82.44332938879998, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 01:30:00", "physical_activity_level": 3}, {"glucose_level": 84.32236650427343, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 01:35:00", "physical_activity_level": 1}, {"glucose_level": 86.620786463527, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 01:40:00", "physical_activity_level": 2}, {"glucose_level": 88.39092975436441, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 01:45:00", "physical_activity_level": 1}, {"glucose_level": 88.68530420021672, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 01:50:00", "physical_activity_level": 2}, {"glucose_level": 85.88914540179192, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 01:55:00", "physical_activity_level": 2}, {"glucose_level": 78.61344622179053, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 02:00:00", "physical_activity_level": 3}, {"glucose_level": 74.83856989937946, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 02:05:00", "physical_activity_level": 2}, {"glucose_level": 73.69804724630016, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 02:10:00", "physical_activity_level": 3}, {"glucose_level": 74.32545960353815, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 02:15:00", "physical_activity_level": 2}, {"glucose_level": 75.85443348311247, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 02:20:00", "physical_activity_level": 3}, {"glucose_level": 77.4379215720636, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 02:25:00", "physical_activity_level": 1}, {"glucose_level": 78.3831894431494, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 02:30:00", "physical_activity_level": 2}, {"glucose_level": 78.32537113466941, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 02:35:00", "physical_activity_level": 2}, {"glucose_level": 77.01098038645173, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 02:40:00", "physical_activity_level": 1}, {"glucose_level": 74.46020518961451, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 02:45:00", "physical_activity_level": 3}, {"glucose_level": 71.27474741537469, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 02:50:00", "physical_activity_level": 3}, {"glucose_level": 68.1851704256836, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 02:55:00", "physical_activity_level": 1}, {"glucose_level": 65.85812352353733, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 03:00:00", "physical_activity_level": 2}, {"glucose_level": 64.82439637427922, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 03:05:00", "physical_activity_level": 2}, {"glucose_level": 65.5065627959041, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 03:10:00", "physical_activity_level": 1}, {"glucose_level": 67.7170280606258, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 03:15:00", "physical_activity_level": 3}, {"glucose_level": 69.97155013112368, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 03:20:00", "physical_activity_level": 3}, {"glucose_level": 70.62874517911294, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 03:25:00", "physical_activity_level": 3}, {"glucose_level": 69.23068432459134, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 03:30:00", "physical_activity_level": 1}, {"glucose_level": 67.8342454948624, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 03:35:00", "physical_activity_level": 3}, {"glucose_level": 68.91903864665821, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 03:40:00", "physical_activity_level": 1}, {"glucose_level": 73.61263794936751, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 03:45:00", "physical_activity_level": 1}, {"glucose_level": 80.16951110895222, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 03:50:00", "physical_activity_level": 1}, {"glucose_level": 86.26644563448619, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 03:55:00", "physical_activity_level": 3}, {"glucose_level": 90.36686970643171, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 04:00:00", "physical_activity_level": 1}, {"glucose_level": 92.6057969022506, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 04:05:00", "physical_activity_level": 1}, {"glucose_level": 93.51156986786405, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 04:10:00", "physical_activity_level": 1}, {"glucose_level": 93.61254994548418, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 04:15:00", "physical_activity_level": 1}, {"glucose_level": 93.43711614453515, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 04:20:00", "physical_activity_level": 2}, {"glucose_level": 90.21070628525261, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 04:25:00", "physical_activity_level": 2}, {"glucose_level": 75.64408981903016, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 04:30:00", "physical_activity_level": 2}, {"glucose_level": 67.40926856897278, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 04:35:00", "physical_activity_level": 1}, {"glucose_level": 63.86877021330029, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 04:40:00", "physical_activity_level": 3}, {"glucose_level": 63.38513571437601, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 04:45:00", "physical_activity_level": 1}, {"glucose_level": 64.32091858600926, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 04:50:00", "physical_activity_level": 3}, {"glucose_level": 65.11956518002782, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 04:55:00", "physical_activity_level": 1}, {"glucose_level": 64.87158086670739, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 05:00:00", "physical_activity_level": 1}, {"glucose_level": 64.04245820581254, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 05:05:00", "physical_activity_level": 3}, {"glucose_level": 63.38562186616089, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 05:10:00", "physical_activity_level": 2}, {"glucose_level": 63.36969136323632, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 05:15:00", "physical_activity_level": 2}, {"glucose_level": 63.858064066833194, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 05:20:00", "physical_activity_level": 2}, {"glucose_level": 64.5775723477351, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 05:25:00", "physical_activity_level": 1}, {"glucose_level": 65.3017269963147, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 05:30:00", "physical_activity_level": 2}, {"glucose_level": 65.90322091756087, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 05:35:00", "physical_activity_level": 1}, {"glucose_level": 66.29680790971783, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 05:40:00", "physical_activity_level": 1}, {"glucose_level": 66.54699608718914, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 05:45:00", "physical_activity_level": 1}, {"glucose_level": 67.03651332262103, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 05:50:00", "physical_activity_level": 3}, {"glucose_level": 68.14755336168965, "cho_level": 0.0, "insuline_level": 0.021125, "sensor_time": "2021-08-10 05:55:00", "physical_activity_level": 3}];

let count = 0;

const GoogleFitScreen = () => {
    const [syncMessage,setSyncMessage] = useState('');
    const [disconnectMessage,setDisconnectMessage] = useState('');
    const [errorMessage,setErrorMessage] = useState('');

    //function to upload data into cloud
    const uploadData = async () => {
        try{
          const token = await AsyncStorage.getItem('token');
          const email = await AsyncStorage.getItem('email');
  
          let axiosConfig = {
              headers: {
                  'Authorization':`Bearer ${token}`,
                  'Content-Type': 'application/json;charset=UTF-8',
                  "Access-Control-Allow-Origin": "*",
              }
            };
          
          let postData = sensorData[count];
          postData['patient_email'] = email;
           
          const response = await axios.post('https://indoibml.com/api/report/add',postData,axiosConfig);
          console.log(count,'sent')
          // console.log(response.data)
          count++;
        }catch(err){
            console.log(err);
        }
  
      }
      
    setInterval(uploadData,50000);
  



    const googleFitDisconnect = async () => {
        try{
            
            const token = await AsyncStorage.getItem('token')
            const email = await AsyncStorage.getItem('email')

            let axiosConfig = {
                headers: {
                    'Authorization':`Bearer ${token}`,
                    'Content-Type': 'application/json;charset=UTF-8',
                    "Access-Control-Allow-Origin": "*",
                }
                };
            
            const postData = {
                email:email,
            };
        const response = await axios.post('https://indoibml.com/google-fit/api/disconnect',postData,axiosConfig);
        
        if(response.data.error){
            setErrorMessage(response.data.message)
        }
        else{
            //data
            setErrorMessage('');
            setSyncMessage('');
            setDisconnectMessage(response.data.message);
            navigate('GoogleFit');
        }

        }catch(err){
            setErrorMessage('something went wrong')
        }
        
    }
    
    const googleFitSync = async () => {
        try{           
            const email = await AsyncStorage.getItem('email')

            let axiosConfig = {
                headers: {
                    'Content-Type': 'application/json;charset=UTF-8',
                    "Access-Control-Allow-Origin": "*",
                }
                };
            
            const postData = {
                email:email,
            };

        const response = await axios.post('https://indoibml.com/google-fit/api/sync/data',postData,axiosConfig);

        if(response.data.error){
            setErrorMessage(response.data.message)
        }
        else{
            //data
            setErrorMessage('');
            setDisconnectMessage('');
            setSyncMessage(response.data.message)
        }

        }
        catch(err){
                setErrorMessage('something went wrong')
        }
        
    }

    return (
        <View style={styles.viewStyle}>
            <Image style={styles.imgStyle} source={googleFitImg}/>
            <Text style={styles.textStyle}>To connect your Google Fit device click on the below link :</Text>
            <Text
            style={{color: '#6C63FF',fontSize: 17,textAlign: 'center',  marginTop: 6,marginLeft: 25,
            marginBottom: 20}}
             onPress={ ()=> Linking.openURL('https://indoibml.com/google-fit/api/home') }>indoibml/Googlefit</Text>

            <Text style={styles.textStyle}>After connecting,to sync your data click below:</Text>
            <TouchableOpacity onPress={() => googleFitSync()}>
                <View style={styles.buttonView}>
                <Text style={styles.buttonTextStyle}>Sync</Text>
                </View>  
          </TouchableOpacity>
          {syncMessage ? <Text style={styles.disconnectStyle}>{syncMessage}</Text> : null} 
          <Text style={styles.textStyle}>To Disconnect or remove your account click below :</Text>
          <TouchableOpacity onPress={() => googleFitDisconnect()}>
                <View style={styles.signOutButtonView}>
                <Text style={styles.buttonTextStyle}>Disconnect</Text>
                </View>  
          </TouchableOpacity>
          {disconnectMessage ? <Text style={styles.disconnectStyle}>{disconnectMessage}</Text> : null}
          {errorMessage ? <Text style={styles.errorStyle}>{errorMessage}</Text> : null} 
        </View>
    );
};


const styles = StyleSheet.create({
    viewStyle:{
        flex:1,
        backgroundColor:'white',
    },
    imgStyle:{
        width:306,
        height:207,
        alignSelf:'center',
        marginTop:20,
    },
    textStyle:{
        margin:10,
        fontSize:14,
        alignSelf:'center',
    },
    buttonView:{
        backgroundColor:'#6C63FF',
        alignSelf:'center',
        width:100,
        height:40,
        alignItems:'center',
        borderRadius:30,
    },
    signOutButtonView:{
        backgroundColor:'red',
        alignSelf:'center',
        width:100,
        height:40,
        alignItems:'center',
        borderRadius:30,
    },
    buttonTextStyle:{
      marginTop:10,
      color:'white',  
    },
    errorStyle:{
        color:'red',
        alignSelf:'center',
        fontWeight:'bold',
        fontSize:16,
        marginTop:5
    },
    disconnectStyle:{
        alignSelf:'center',
        fontWeight:'bold',
        fontSize:16,
        marginTop:5,
        color:'#6C63FF' 
    },

});



export default GoogleFitScreen;